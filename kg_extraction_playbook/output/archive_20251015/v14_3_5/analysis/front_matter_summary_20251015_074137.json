{
  "section": "front_matter",
  "timestamp": "20251015_074137",
  "extraction_file": "front_matter_v14_3_5_20251015_073302.json",
  "quality_metrics": {
    "overall_grade": "B",
    "issue_rate": 14.0,
    "total_relationships": 164,
    "total_issues": 23
  },
  "issue_breakdown": {
    "CRITICAL": 1,
    "HIGH": 22,
    "MEDIUM": 0,
    "MILD": 0
  },
  "quality_gate": {
    "passes_a_plus_gate": false,
    "criteria": {
      "critical_issues_zero": false,
      "high_issues_lte_2": false,
      "issue_rate_lte_2_percent": false
    }
  },
  "actionable_issues": [
    {
      "severity": "CRITICAL",
      "category": "Reversed Authorship",
      "count": 1,
      "percentage": 0.6,
      "description": "Book title appears as source instead of author in authorship relationship. This is the classic V4 pattern where (Book, authored, Author) should be (Author, authored, Book).",
      "examples": [
        {
          "source": "Our Biggest Deal",
          "relationship": "authored",
          "target": "Aaron William Perry",
          "evidence_text": "Bibliographic citation context on page 4",
          "page": 4,
          "what_is_wrong": "Book title is the source when it should be the target. The author should be the source of the 'authored' relationship.",
          "should_be": {
            "source": "Aaron William Perry",
            "relationship": "authored",
            "target": "Our Biggest Deal"
          }
        }
      ]
    },
    {
      "severity": "HIGH",
      "category": "Semantic Type Incompatibility",
      "count": 22,
      "percentage": 13.4,
      "description": "Organizations are being assigned source_type='Organization' but then creating 'is-a Organization' relationships where the predicate suggests they should be Person entities. The semantic_validator flagged these as SEMANTIC_INCOMPATIBILITY but they were not corrected.",
      "examples": [
        {
          "source": "Allianz Global Insurance",
          "relationship": "is-a",
          "target": "Organization",
          "evidence_text": "Case Study Vignettes section listing organizations",
          "page": 18,
          "what_is_wrong": "Entity is already typed as Organization in source_type field, but then creates a redundant 'is-a Organization' relationship. The semantic_validator correctly flagged this as type mismatch (Person cannot be-a Organization), suggesting the source_type should match the relationship assertion.",
          "should_be": {
            "source": "Allianz Global Insurance",
            "relationship": null,
            "target": null,
            "note": "This relationship should be removed entirely - it's redundant with the source_type field"
          }
        },
        {
          "source": "Climate First Bank",
          "relationship": "is-a",
          "target": "Organization",
          "evidence_text": "Case Study Vignettes section",
          "page": 18,
          "what_is_wrong": "Same issue - redundant type assertion that conflicts with entity typing",
          "should_be": {
            "source": "Climate First Bank",
            "relationship": null,
            "target": null,
            "note": "Remove redundant type relationship"
          }
        }
      ]
    }
  ],
  "recommendations": [
    {
      "priority": "CRITICAL",
      "type": "CODE_FIX",
      "recommendation": "The bibliographic_parser correctly detects reversed authorship and sets the AUTHORSHIP_REVERSED flag, but the actual reversal is not being applied. Add code to swap source and target when this flag is set:\n\nif relationship.get('flags', {}).get('AUTHORSHIP_REVERSED'):\n    relationship['source'], relationship['target'] = relationship['target'], relationship['source']\n    relationship['source_type'], relationship['target_type'] = relationship['target_type'], relationship['source_type']"
    },
    {
      "priority": "HIGH",
      "type": "PROMPT_ENHANCEMENT",
      "recommendation": "Add explicit instruction to Pass 1 extraction prompt:\n\n'IMPORTANT: Do NOT extract entity type assertions as relationships. Entity types should ONLY be specified in the source_type and target_type fields. Do not create relationships like (Entity, is-a, Type) or (Entity, is, Category). These are redundant and will be filtered out.'\n\nAlso add a few-shot example showing what NOT to do:\n\nBAD: {source: 'Apple Inc', relationship: 'is-a', target: 'Company', source_type: 'Organization'}\nGOOD: {source: 'Apple Inc', relationship: 'founded', target: 'iPhone', source_type: 'Organization', target_type: 'Product'}"
    },
    {
      "priority": "HIGH",
      "type": "NEW_MODULE",
      "recommendation": "Create a new post-processing module that filters out redundant type assertion relationships:\n\ndef filter_type_assertions(relationships):\n    filtered = []\n    for rel in relationships:\n        # Remove 'is-a [Type]' relationships where Type matches source_type\n        if rel['relationship'] in ['is-a', 'is a', 'is'] and rel['target'] in ['Organization', 'Person', 'Book', 'Category', 'Place']:\n            if rel['source_type'] == rel['target']:\n                continue  # Skip redundant type assertion\n        filtered.append(rel)\n    return filtered\n\nThis provides defense-in-depth even if the prompt fix doesn't fully solve the issue."
    },
    {
      "priority": "MEDIUM",
      "type": "CODE_FIX",
      "recommendation": "Enhance the list_splitter to handle dedication statements more intelligently. When processing 'dedicated to X, Y, Z' patterns:\n\n1. Detect dedication context (relationship contains 'dedicated')\n2. Parse target to extract just the person name, removing any book title prefix\n3. Use regex to strip patterns like '^[Book Title] to (.+)$' and keep only the person name\n\nExample:\nif 'dedicated' in relationship['relationship'].lower():\n    # Strip 'Book Title to ' prefix from target\n    target = re.sub(r'^.+ to (.+)$', r'\\1', relationship['target'])\n    relationship['target'] = target"
    },
    {
      "priority": "LOW",
      "type": "PROMPT_ENHANCEMENT",
      "recommendation": "Add guidance for dedication relationships:\n\n'When extracting dedication relationships, the target should be ONLY the person/entity being dedicated to, not the book title. \n\nBAD: (Author, dedicated, \"Book Title to Person Name\")\nGOOD: (Author, dedicated to, \"Person Name\")'"
    }
  ]
}